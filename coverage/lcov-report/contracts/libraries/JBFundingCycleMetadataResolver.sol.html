<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/libraries/JBFundingCycleMetadataResolver.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">contracts/libraries/</a> JBFundingCycleMetadataResolver.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/33</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/0</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/17</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/33</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity 0.8.6;
&nbsp;
import './../interfaces/IJBFundingCycleStore.sol';
import './../interfaces/IJBFundingCycleDataSource.sol';
import './../structs/JBFundingCycleMetadata.sol';
&nbsp;
library JBFundingCycleMetadataResolver {
<span class="fstat-no" title="function not covered" >  function reservedRate(JBFundingCycle memory _fundingCycle) internal pure returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >    return uint256(uint16(_fundingCycle.metadata &gt;&gt; 8));</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function redemptionRate(JBFundingCycle memory _fundingCycle) internal pure returns (uint256) {</span>
    // Redemption rate is a number 0-10000. It's inverse was stored so the most common case of 100% results in no storage needs.
<span class="cstat-no" title="statement not covered" >    return 10000 - uint256(uint16(_fundingCycle.metadata &gt;&gt; 24));</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function ballotRedemptionRate(JBFundingCycle memory _fundingCycle)</span>
    internal
    pure
    returns (uint256)
  {
    // Redemption rate is a number 0-10000. It's inverse was stored so the most common case of 100% results in no storage needs.
<span class="cstat-no" title="statement not covered" >    return 10000 - uint256(uint16(_fundingCycle.metadata &gt;&gt; 40));</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function payPaused(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 56) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function distributionsPaused(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 57) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function redeemPaused(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 58) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function mintPaused(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 59) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function burnPaused(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 60) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function changeTokenAllowed(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 61) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function terminalMigrationAllowed(JBFundingCycle memory _fundingCycle)</span>
    internal
    pure
    returns (bool)
  {
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 62) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function controllerMigrationAllowed(JBFundingCycle memory _fundingCycle)</span>
    internal
    pure
    returns (bool)
  {
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 63) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function shouldHoldFees(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 64) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function shouldUseLocalBalanceForRedemptions(JBFundingCycle memory _fundingCycle)</span>
    internal
    pure
    returns (bool)
  {
<span class="cstat-no" title="statement not covered" >    return ((_fundingCycle.metadata &gt;&gt; 65) &amp; 1) == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function useDataSourceForPay(JBFundingCycle memory _fundingCycle) internal pure returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >    return (_fundingCycle.metadata &gt;&gt; 66) &amp; 1 == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function useDataSourceForRedeem(JBFundingCycle memory _fundingCycle)</span>
    internal
    pure
    returns (bool)
  {
<span class="cstat-no" title="statement not covered" >    return (_fundingCycle.metadata &gt;&gt; 67) &amp; 1 == 0;</span>
  }
&nbsp;
<span class="fstat-no" title="function not covered" >  function dataSource(JBFundingCycle memory _fundingCycle)</span>
    internal
    pure
    returns (IJBFundingCycleDataSource)
  {
<span class="cstat-no" title="statement not covered" >    return IJBFundingCycleDataSource(address(uint160(_fundingCycle.metadata &gt;&gt; 68)));</span>
  }
&nbsp;
  /**
    @notice
    Pack the funding cycle metadata.
&nbsp;
    @param _metadata The metadata to validate and pack.
&nbsp;
    @return packed The packed uint256 of all metadata params. The first 8 bytes specify the version.
  */
<span class="fstat-no" title="function not covered" >  function packFundingCycleMetadata(JBFundingCycleMetadata memory _metadata)</span>
    internal
    pure
    returns (uint256 packed)
  {
    // version 1 in the first 8 bytes.
<span class="cstat-no" title="statement not covered" >    packed = 1</span>;
    // reserved rate in bits 8-23.
<span class="cstat-no" title="statement not covered" >    packed |= _metadata.reservedRate &lt;&lt; 8</span>;
    // bonding curve in bits 24-39.
    // Redemption rate is a number 0-10000. Store the reverse so the most common case of 100% results in no storage needs.
<span class="cstat-no" title="statement not covered" >    packed |= (10000 - _metadata.redemptionRate) &lt;&lt; 24</span>;
    // reconfiguration bonding curve rate in bits 40-55.
    // Redemption rate is a number 0-10000. Store the reverse so the most common case of 100% results in no storage needs.
<span class="cstat-no" title="statement not covered" >    packed |= (10000 - _metadata.ballotRedemptionRate) &lt;&lt; 50</span>;
    // pause pay in bit 56.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.pausePay ? 1 : 0) &lt;&lt; 56</span>;
    // pause tap in bit 57.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.pauseDistributions ? 1 : 0) &lt;&lt; 57</span>;
    // pause redeem in bit 58.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.pauseRedeem ? 1 : 0) &lt;&lt; 58</span>;
    // pause mint in bit 59.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.pauseMint ? 1 : 0) &lt;&lt; 59</span>;
    // pause mint in bit 60.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.pauseBurn ? 1 : 0) &lt;&lt; 60</span>;
    // pause change token in bit 61.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.allowChangeToken ? 1 : 0) &lt;&lt; 61</span>;
    // allow terminal migration in bit 62.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.allowTerminalMigration ? 1 : 0) &lt;&lt; 62</span>;
    // allow controller migration in bit 63.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.allowControllerMigration ? 1 : 0) &lt;&lt; 63</span>;
    // hold fees in bit 64.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.holdFees ? 1 : 0) &lt;&lt; 64</span>;
    // useLocalBalanceForRedemptions in bit 65.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.useLocalBalanceForRedemptions ? 1 : 0) &lt;&lt; 65</span>;
    // use pay data source in bit 66.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.useDataSourceForPay ? 1 : 0) &lt;&lt; 66</span>;
    // use redeem data source in bit 67.
<span class="cstat-no" title="statement not covered" >    packed |= (_metadata.useDataSourceForRedeem ? 1 : 0) &lt;&lt; 67</span>;
    // data source address in bits 68-227.
<span class="cstat-no" title="statement not covered" >    packed |= uint160(address(_metadata.dataSource)) &lt;&lt; 68</span>;
  }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Nov 23 2021 19:29:37 GMT-0500 (Eastern Standard Time)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
